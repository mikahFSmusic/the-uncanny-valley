"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var r=require("fast-deep-equal"),e=require("react");function n(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var t=n(r);function o(r,e){var n;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(n=function(r,e){if(!r)return;if("string"==typeof r)return a(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(r,e)}(r))||e&&r&&"number"==typeof r.length){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=r[Symbol.iterator]()).next.bind(n)}function a(r,e){(null==e||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function i(r,e,n,a,i){void 0===a&&(a=0),void 0===i&&(i=!1);for(var u,f=o(e);!(u=f()).done;){var l=u.value;if(t.default(n,l.args)){if(i)return;if(l.error)throw l.error;if(l.response)return l.response;throw l.promise}}var c={args:n,promise:r.apply(void 0,n).then((function(r){return c.response=null==r||r})).catch((function(r){return c.error=r})).then((function(){a>0&&setTimeout((function(){var r=e.indexOf(c);-1!==r&&e.splice(r,1)}),a)}))};if(e.push(c),!i)throw c.promise}function u(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(void 0===n)r.splice(0,r.length);else{var a=r.find((function(r){return t.default(n,r.args)}));if(a){var i=r.indexOf(a);-1!==i&&r.splice(i,1)}}}var f=[];function l(r,n){return e.useMemo((function(){return r&&i(r,f,n,l.lifespan)}),n)}l.lifespan=0,l.clear=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];return u.apply(void 0,[f].concat(e))},l.preload=function(r){for(var e=arguments.length,n=new Array(e>1?e-1:0),t=1;t<e;t++)n[t-1]=arguments[t];i(r,f,n,l.lifespan,!0)},l.peek=function(){for(var r,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return null==(r=f.find((function(r){return t.default(n,r.args)})))?void 0:r.response},exports.createAsset=function(r,e){void 0===e&&(e=0);var n=[];return{read:function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i(r,n,o,e)},preload:function(){for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];i(r,n,o,e,!0)},clear:function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return u.apply(void 0,[n].concat(e))},peek:function(){for(var r,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return null==(r=n.find((function(r){return t.default(o,r.args)})))?void 0:r.response}}},exports.useAsset=l;
